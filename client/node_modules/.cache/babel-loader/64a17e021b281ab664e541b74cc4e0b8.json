{"ast":null,"code":"var _jsxFileName = \"/Users/jorgemartinez/Documents/MERN-deployment/client/src/components/Main.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport AdminTable from './AdminTable';\nimport Histogram from './Histogram';\nimport { useNavigate } from 'react-router-dom';\nimport NavBarMui from './NavBarMui';\nimport Statuses from './Statuses';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Main = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const [customers, setCustomers] = useState([]);\n  const [repsWithCustomer, setRepWithCustomer] = useState([]);\n  const [userRole, setUserRole] = useState('');\n  useEffect(() => {\n    axios.get(process.env.REACT_APP_API_URL + '/api/customers/all', {\n      withCredentials: true\n    }).then(response => {\n      setCustomers(response.data);\n    }).catch(err => navigate(\"/login\"));\n    axios.get(process.env.REACT_APP_API_URL + '/api/rep/all/customers', {\n      withCredentials: true\n    }).then(response => {\n      setRepWithCustomer(response.data);\n    }).catch(err => console.log(err));\n    axios.get(process.env.REACT_APP_API_URL + '/api/getUser', {\n      withCredentials: true\n    }).then(response => {\n      // console.log('Informacion de usuario')\n      console.log(response.data);\n      setUserRole(response.data.role);\n    }).catch(err => console.log(err));\n  }, []); //update list after delete\n\n  const filterList = deleteId => {\n    const updatedList = customers.filter(eachCust => deleteId !== eachCust._id);\n    setCustomers(updatedList);\n  }; //Calculations\n  //Calculate all de statuses  \n\n\n  let arrOfStatus = customers.map(eachRCust => eachRCust.status);\n  let sold = 0;\n  let installed = 0;\n  let contractSigned = 0;\n  let paid = 0;\n\n  for (let i = 0; i < arrOfStatus.length; i++) {\n    if (arrOfStatus[i] === 'Sold') {\n      sold++;\n    }\n\n    if (arrOfStatus[i] === 'Installed') {\n      installed++;\n    }\n\n    if (arrOfStatus[i] === 'Contract signed') {\n      contractSigned++;\n    }\n\n    if (arrOfStatus[i] === 'Paid') {\n      paid++;\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(NavBarMui, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Admin Dashboard Role: \", userRole]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Statuses, {\n        sold: sold,\n        installed: installed,\n        contractSigned: contractSigned,\n        paid: paid\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(AdminTable, {\n        customers: customers,\n        onDelete: filterList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Histogram, {\n        repsWithCustomer: repsWithCustomer,\n        customers: customers\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Main, \"JOL0FClRgZK0RIgfR6VzaaxkGKQ=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"names":["axios","React","useState","useEffect","AdminTable","Histogram","useNavigate","NavBarMui","Statuses","Main","navigate","customers","setCustomers","repsWithCustomer","setRepWithCustomer","userRole","setUserRole","get","process","env","REACT_APP_API_URL","withCredentials","then","response","data","catch","err","console","log","role","filterList","deleteId","updatedList","filter","eachCust","_id","arrOfStatus","map","eachRCust","status","sold","installed","contractSigned","paid","i","length"],"sources":["/Users/jorgemartinez/Documents/MERN-deployment/client/src/components/Main.jsx"],"sourcesContent":["import axios from 'axios'\nimport React, {useState, useEffect} from 'react'\nimport AdminTable from './AdminTable'\nimport Histogram from './Histogram'\nimport { useNavigate } from 'react-router-dom'\nimport NavBarMui from './NavBarMui'\nimport Statuses from './Statuses'\n\n\nconst Main = () => {\n  const navigate = useNavigate()\n  const [customers, setCustomers] = useState([])\n  const [repsWithCustomer, setRepWithCustomer] = useState([])\n  const [userRole, setUserRole] = useState('')\n\n  useEffect(()=>{\n    axios.get(process.env.REACT_APP_API_URL+'/api/customers/all', {withCredentials: true})\n      .then(response=>{\n        \n        setCustomers(response.data)\n      })\n      .catch(err=>navigate(\"/login\"))\n\n      axios.get(process.env.REACT_APP_API_URL+'/api/rep/all/customers', {withCredentials: true})\n      .then(response=>{\n  \n        setRepWithCustomer(response.data)\n      })\n      .catch(err=>console.log(err))\n\n      axios.get(process.env.REACT_APP_API_URL+'/api/getUser', {withCredentials: true})\n      .then(response=>{\n        // console.log('Informacion de usuario')\n        console.log(response.data)\n  \n        setUserRole(response.data.role)\n      })\n      .catch(err=>console.log(err))\n\n  },[])\n\n\n  //update list after delete\n  const filterList = (deleteId) =>{\n    const updatedList = customers.filter((eachCust)=>deleteId!==eachCust._id)\n    setCustomers(updatedList)\n  }\n\n//Calculations\n\n//Calculate all de statuses  \n  let arrOfStatus = customers.map((eachRCust)=> eachRCust.status)\n  let sold = 0\n  let installed = 0\n  let contractSigned = 0\n  let paid = 0\n\n  for (let i = 0; i < arrOfStatus.length; i++){\n    if (arrOfStatus[i] === 'Sold'){\n      sold++\n    }\n    if (arrOfStatus[i] === 'Installed'){\n      installed++\n    }\n    if (arrOfStatus[i] === 'Contract signed'){\n      contractSigned++\n    }\n    if (arrOfStatus[i] === 'Paid'){\n      paid++\n    }\n  }\n\n\n  return (\n    <div>\n      <NavBarMui/>\n      <h1>Admin Dashboard Role: {userRole}</h1>\n      <div>\n      <Statuses sold={sold} installed={installed} contractSigned={contractSigned} paid={paid}/>\n      <AdminTable customers={customers} onDelete={filterList}/>\n      <Histogram repsWithCustomer={repsWithCustomer} customers={customers}/>\n      </div>\n    </div>\n  )\n}\n\nexport default Main"],"mappings":"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"},"metadata":{},"sourceType":"module"}
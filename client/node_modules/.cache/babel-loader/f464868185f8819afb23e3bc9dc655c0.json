{"ast":null,"code":"var _jsxFileName = \"/Users/jorgemartinez/Documents/MERN-deployment/client/src/components/Main.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport AdminTable from './AdminTable';\nimport Histogram from './Histogram';\nimport { useNavigate } from 'react-router-dom';\nimport NavBarMui from './NavBarMui';\nimport Statuses from './Statuses';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Main = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const [customers, setCustomers] = useState([]);\n  const [repsWithCustomer, setRepWithCustomer] = useState([]);\n  const [userRole, setUserRole] = useState('');\n  const [thisMonth, setThisMonth] = useState('');\n  useEffect(() => {\n    axios.get(process.env.REACT_APP_API_URL + '/api/customers/all', {\n      withCredentials: true\n    }).then(response => {\n      setCustomers(response.data); // Create a new Date object\n\n      const currentDate = new Date(); // Get the month (0-indexed, so we add 1 to get the correct month)\n\n      const month = currentDate.getMonth() + 1; // Set the current month in the state\n\n      setThisMonth(month.toString());\n    }).catch(err => navigate(\"/login\")); //retrieve customers with reps\n\n    axios.get(process.env.REACT_APP_API_URL + '/api/rep/all/customers', {\n      withCredentials: true\n    }).then(response => {\n      setRepWithCustomer(response.data);\n    }).catch(err => console.log(err));\n    axios.get(process.env.REACT_APP_API_URL + '/api/getUser', {\n      withCredentials: true\n    }).then(response => {\n      // console.log('Informacion de usuario')\n      // console.log(response.data)\n      setUserRole(response.data.role);\n    }).catch(err => console.log(err));\n  }, []); //update list after delete\n\n  const filterList = deleteId => {\n    const updatedList = customers.filter(eachCust => deleteId !== eachCust._id);\n    setCustomers(updatedList);\n  }; //Calculations\n  //Calculate all de statuses  \n\n\n  let arrOfStatus = customers.map(eachRCust => eachRCust.status);\n  let sold = 0;\n  let installed = 0;\n  let contractSigned = 0;\n  let paid = 0;\n\n  for (let i = 0; i < arrOfStatus.length; i++) {\n    if (arrOfStatus[i] === 'Sold') {\n      sold++;\n    }\n\n    if (arrOfStatus[i] === 'Installed') {\n      installed++;\n    }\n\n    if (arrOfStatus[i] === 'Contract signed') {\n      contractSigned++;\n    }\n\n    if (arrOfStatus[i] === 'Paid') {\n      paid++;\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(NavBarMui, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Admin Dashboard Role: \", userRole]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Statuses, {\n        sold: sold,\n        installed: installed,\n        contractSigned: contractSigned,\n        paid: paid\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(AdminTable, {\n        customers: customers,\n        thisMonth: thisMonth,\n        onDelete: filterList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Histogram, {\n        repsWithCustomer: repsWithCustomer,\n        customers: customers\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Main, \"4WsP/89Kwvs9XYdRUlqWqmCPJmI=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"names":["axios","React","useState","useEffect","AdminTable","Histogram","useNavigate","NavBarMui","Statuses","Main","navigate","customers","setCustomers","repsWithCustomer","setRepWithCustomer","userRole","setUserRole","thisMonth","setThisMonth","get","process","env","REACT_APP_API_URL","withCredentials","then","response","data","currentDate","Date","month","getMonth","toString","catch","err","console","log","role","filterList","deleteId","updatedList","filter","eachCust","_id","arrOfStatus","map","eachRCust","status","sold","installed","contractSigned","paid","i","length"],"sources":["/Users/jorgemartinez/Documents/MERN-deployment/client/src/components/Main.jsx"],"sourcesContent":["import axios from 'axios'\nimport React, {useState, useEffect} from 'react'\nimport AdminTable from './AdminTable'\nimport Histogram from './Histogram'\nimport { useNavigate } from 'react-router-dom'\nimport NavBarMui from './NavBarMui'\nimport Statuses from './Statuses'\n\n\nconst Main = () => {\n  const navigate = useNavigate()\n  const [customers, setCustomers] = useState([])\n  const [repsWithCustomer, setRepWithCustomer] = useState([])\n  const [userRole, setUserRole] = useState('')\n  const [thisMonth, setThisMonth] = useState('')\n\n  useEffect(()=>{\n    axios.get(process.env.REACT_APP_API_URL+'/api/customers/all', {withCredentials: true})\n      .then(response=>{\n        \n        setCustomers(response.data)\n\n         // Create a new Date object\n      const currentDate = new Date();\n\n      // Get the month (0-indexed, so we add 1 to get the correct month)\n      const month = currentDate.getMonth() + 1;\n\n      // Set the current month in the state\n      setThisMonth(month.toString());\n\n\n      })\n      .catch(err=>navigate(\"/login\"))\n\n\n      //retrieve customers with reps\n\n      axios.get(process.env.REACT_APP_API_URL+'/api/rep/all/customers', {withCredentials: true})\n      .then(response=>{\n  \n        setRepWithCustomer(response.data)\n      })\n      .catch(err=>console.log(err))\n\n      axios.get(process.env.REACT_APP_API_URL+'/api/getUser', {withCredentials: true})\n      .then(response=>{\n        // console.log('Informacion de usuario')\n        // console.log(response.data)\n  \n        setUserRole(response.data.role)\n      })\n      .catch(err=>console.log(err))\n\n  },[])\n\n\n  //update list after delete\n  const filterList = (deleteId) =>{\n    const updatedList = customers.filter((eachCust)=>deleteId!==eachCust._id)\n    setCustomers(updatedList)\n  }\n\n//Calculations\n\n//Calculate all de statuses  \n  let arrOfStatus = customers.map((eachRCust)=> eachRCust.status)\n  let sold = 0\n  let installed = 0\n  let contractSigned = 0\n  let paid = 0\n\n  for (let i = 0; i < arrOfStatus.length; i++){\n    if (arrOfStatus[i] === 'Sold'){\n      sold++\n    }\n    if (arrOfStatus[i] === 'Installed'){\n      installed++\n    }\n    if (arrOfStatus[i] === 'Contract signed'){\n      contractSigned++\n    }\n    if (arrOfStatus[i] === 'Paid'){\n      paid++\n    }\n  }\n\n\n  return (\n    <div>\n      <NavBarMui/>\n      <h1>Admin Dashboard Role: {userRole}</h1>\n      <div>\n      <Statuses sold={sold} installed={installed} contractSigned={contractSigned} paid={paid}/>\n      <AdminTable customers={customers} thisMonth={thisMonth} onDelete={filterList}/>\n      <Histogram repsWithCustomer={repsWithCustomer} customers={customers}/>\n      </div>\n    </div>\n  )\n}\n\nexport default Main"],"mappings":"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"},"metadata":{},"sourceType":"module"}